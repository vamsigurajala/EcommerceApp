{% extends "changemode.html" %}

{% block title %}Forgot Password{% endblock %}

{% block extra_style %}
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    /* Inherit the exact look from login.html */
    body, .forms, .forms .title, .login-signup, input, label, a {
      font-family: 'Inter', Arial, sans-serif !important;
    }
    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh; /* matches login layout */
    }
    .forms {
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 32px rgba(0, 0, 0, 0.08);
      padding: 48px 38px 38px 38px;
      width: 400px;
      transition: background 0.3s, color 0.3s;
    }
    body.dark-mode .forms {
      background-color: #202225;
      color: #fff;
      box-shadow: 0 4px 32px rgba(255,255,255,0.04);
    }
    .forms .title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 28px;
      letter-spacing: -0.5px;
      display: block;
    }
    .forms .input-field {
      margin-bottom: 22px;
    }
    .forms input[type="email"],
    .forms input[type="password"] {
      background-color: #f5f6fa;
      border: 1px solid #e3e3e3;
      border-radius: 7px;
      font-size: 16px;
      font-weight: 500;
      letter-spacing: 0.03em;
      padding: 12px;
      width: 100%;
      transition: background 0.2s, color 0.2s, border 0.2s;
    }
    .forms input[type="email"]:focus,
    .forms input[type="password"]:focus {
      outline: none;
      border: 1.5px solid #0077cc;
      background: #eaf4fd;
    }
    body.dark-mode .forms input[type="email"],
    body.dark-mode .forms input[type="password"] {
      background-color: #292c31;
      color: #fff;
      border: 1px solid #383b41;
    }
    body.dark-mode .forms input[type="email"]:focus,
    body.dark-mode .forms input[type="password"]:focus {
      background: #23282f;
      border: 1.5px solid #00aaff;
    }
    .forms .button {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 6px;
    }
    .forms button[type="submit"] {
      background-color: #0077cc;
      border: none;
      border-radius: 7px;
      color: #fff;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      padding: 12px 32px;
      transition: background-color 0.3s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      width: 100%;
    }
    .forms button[type="submit"]:hover {
      background-color: #005fa3;
    }
    .login-signup {
      margin-top: 18px;
      text-align: center;
    }
    .login-signup a {
      color: #0077cc;
      text-decoration: none;
      font-weight: 600;
      margin-left: 5px;
      transition: color 0.2s;
    }
    .login-signup a:hover {
      color: #005fa3;
      text-decoration: underline;
    }
    .message {
      font-size: 15px;
      margin-bottom: 16px;
      border-radius: 8px;
      padding: 10px 12px;
      line-height: 1.35;
    }
    .success-message { background: #eaf7ee; color: #0a7a2f; border: 1px solid #bfe6c9; }
    .error-message   { background: #fdeaea; color: #9b1c1c; border: 1px solid #f3c2c2; }

    @media only screen and (max-width: 768px) {
      .forms { padding: 30px 12px 24px 12px; width: 95%; }
    }
  </style>
{% endblock %}

{% block content %}
  <div class="container">
    <div class="forms">
      {% if step == "done" %}
        <span class="title">Password Reset</span>
        {% if message %}
          <div class="message {{ message_type }}-message">{{ message }}</div>
        {% endif %}
        <div class="login-signup" style="margin-top: 8px;">
          <a href="{% url 'loginuser' %}">Go to Login</a>
        </div>
      {% else %}
        <span class="title">Reset Password</span>
        {% if message %}
          <div class="message {{ message_type }}-message">{{ message }}</div>
        {% endif %}
        <form method="POST">
          {% csrf_token %}
          <div class="input-field">
            <input type="email" id="email" name="email" placeholder="Enter your registered email" required>
          </div>
          <div class="input-field">
            <input type="password" id="new_password" name="new_password" placeholder="New password" required>
          </div>
          <div class="input-field">
            <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm new password" required>
          </div>
          <div class="button">
            <button type="submit">Reset Password</button>
          </div>
        </form>
        <div class="login-signup">
          <span>Remembered it?
            <a href="{% url 'loginuser' %}">Back to Login</a>
          </span>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}

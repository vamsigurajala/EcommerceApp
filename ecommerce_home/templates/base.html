<!DOCTYPE html>
<html>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<head>
    <title>{% block title %}Ecommerce Site{% endblock %}</title>
    <style>
        body.light-mode {
            background: #fff;
            color: #222;
        }
        body.dark-mode {
            background: #222;
            color: #fff;
        }
        header, nav, .card, .pagination a {
            transition: background 0.2s, color 0.2s;
        }
        body.dark-mode header, body.dark-mode nav {
            background: #1a1a1a !important;
            color: #fff !important;
        }
        body.light-mode header, body.light-mode nav {
            background: #333 !important;
            color: #fff !important;
        }
        body.dark-mode .card {
            background: #1a1a1a;
            color: #fff;
            box-shadow: 0 0 10px rgba(255,255,255,0.1);
        }
        body.light-mode .card {
            background: #fff;
            color: #222;
        }
        body.dark-mode .pagination a {
            background: #444;
            color: #fff;
        }
        body.light-mode .pagination a {
            background: #333;
            color: #fff;
        }
        .search-container input[type="text"] {
            padding: 10px;
            font-size: 16px;
            border: none;
            border-radius: 5px 0 0 5px;
            background-color: #f2f2f2;
            width: 70%;
            margin-right: 0;
        }

        .search-container button[type="submit"] {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 0 5px 5px 0;
            background-color: #333;
            color: white;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-left: 0;
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        header {
            background-color: #333;
            color: white;
            padding: 20px;
        }

        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
        }

        nav li {
            display: inline-block;
        }

        nav li a {
            color: white;
            text-decoration: none;
            padding: 10px;
        }

        nav {
            text-align: right;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 10px;
        }

        main {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }

        .card-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .card {
            width: 300px;
            margin: 20px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s, background 0.2s, color 0.2s;
        }

        .card:hover {
            transform: scale(1.05);
        }

        .card img {
            max-width: 100%;
            height: auto;
            margin-bottom: 20px;
        }

        .card h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .card p {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .card button {
            background-color: #333;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .card button:hover {
            background-color: #555;
        }

        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .pagination a {
            padding: 10px;
            background-color: #333;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
        }

        .pagination a:hover {
            background-color: #fff;
            color: #333;
        }
        #theme-toggle {
            float: right;
            margin-left: 15px;
            margin-top: -8px;
            font-size: 20px;
            border: none;
            background: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .theme-tooltip {
            display: none;
            position: absolute;
            left: 10%;
            top: 110%;
            transform: translateX(-50%);
            background: #232323;
            color: #fff;
            padding: 7px 16px;
            border-radius: 6px;
            font-size: 14px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.18);
            white-space: nowrap;
            margin-top: 7px;
            z-index: 99;
            font-family: inherit;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.15s;
        }
        #theme-toggle:hover .theme-tooltip {
            display: block;
            opacity: 1;
        }
        .theme-tooltip::before {
            content: "";
            position: absolute;
            top: -7px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 7px 7px 7px;
            border-style: solid;
            border-color: transparent transparent #232323 transparent;
        }
        .icon-navbar {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 24px;
}

.nav-icon-link {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: inherit;
    font-size: 1.5rem;
    padding: 8px;
    border-radius: 50%;
    transition: background 0.18s;
    text-decoration: none;
    background: none;
    border: none;
}
.nav-icon-link:hover, .nav-icon-link:focus {
    background: rgba(60,60,60,0.14);
}

.icon-tooltip {
    display: none;
    position: absolute;
    top: 120%;
    left: 50%;
    transform: translateX(-50%);
    background: #232323;
    color: #fff;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 14px;
    white-space: nowrap;
    box-shadow: 0 2px 8px rgba(0,0,0,0.14);
    z-index: 20;
    opacity: 0;
    transition: opacity 0.13s;
    pointer-events: none;
}
.nav-icon-link:hover .icon-tooltip,
.nav-icon-link:focus .icon-tooltip {
    display: block;
    opacity: 1;
}
.icon-tooltip::before {
    content: "";
    position: absolute;
    top: -7px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 0 7px 7px 7px;
    border-style: solid;
    border-color: transparent transparent #232323 transparent;
}

    </style>
    {% block extra_style %}{% endblock %}
</head>
<body>
    <header>
        <button id="theme-toggle">
            <!-- Moon Icon (light mode) -->
            <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path fill="currentColor" d="M21 15.3A9 9 0 1 1 12.7 3a7 7 0 1 0 8.3 12.3z"/>
            </svg>
            <!-- Sun Icon (dark mode) -->
            <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" style="display:none;" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2" fill="none"/>
                <g stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="1" x2="12" y2="3"/>
                    <line x1="12" y1="21" x2="12" y2="23"/>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                    <line x1="1" y1="12" x2="3" y2="12"/>
                    <line x1="21" y1="12" x2="23" y2="12"/>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                </g>
            </svg>
            <span class="theme-tooltip" id="theme-tooltip">Switch to dark mode</span>
        </button>
        <p>Hi {{ user.username }}, Welcome to</p>
        <h1>Ecommerce Site</h1>
        <nav class="icon-navbar">
    <a href="/api/paginate/?page=1" class="nav-icon-link" title="Home">
        <i class="fa fa-home"></i>
        <span class="icon-tooltip">Home</span>
    </a>
    <a href="/api/cart/" class="nav-icon-link" title="Cart">
        <i class="fa fa-shopping-cart"></i>
        <span class="icon-tooltip">Cart</span>
    </a>
    <a href="/api/vieworders/" class="nav-icon-link" title="Orders">
        <i class="fa fa-box"></i>
        <span class="icon-tooltip">Orders</span>
    </a>
    <a href="{% url 'loginuser' %}" class="nav-icon-link" title="Logout">
        <i class="fa fa-sign-out-alt"></i>
        <span class="icon-tooltip">Logout</span>
    </a>
</nav>

    </header>
    <main>
        {% block content %}
        {% endblock %}
    </main>
    <script>
       function setTheme(mode) {
            const moonIcon = document.getElementById('moon-icon');
            const sunIcon = document.getElementById('sun-icon');
            const tooltip = document.getElementById('theme-tooltip');
            if (mode === 'dark') {
                document.body.classList.add('dark-mode');
                document.body.classList.remove('light-mode');
                sunIcon.style.display = '';
                moonIcon.style.display = 'none';
                if (tooltip) tooltip.textContent = 'Switch to Light Mode';
            } else {
                document.body.classList.add('light-mode');
                document.body.classList.remove('dark-mode');
                moonIcon.style.display = '';
                sunIcon.style.display = 'none';
                if (tooltip) tooltip.textContent = 'Switch to Dark Mode';
            }
        }
        let savedTheme = localStorage.getItem('theme');
        setTheme(savedTheme === 'dark' ? 'dark' : 'light');
        document.getElementById('theme-toggle').onclick = function() {
            let newTheme = document.body.classList.contains('dark-mode') ? 'light' : 'dark';
            setTheme(newTheme);
            localStorage.setItem('theme', newTheme);
        };
    </script>
</body>
</html>
